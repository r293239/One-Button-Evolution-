<!DOCTYPE html>
<html>
<head>
    <title>Complete Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(30, 41, 59, 0.8);
            border-radius: 15px;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }
        
        h1 {
            font-size: 2.5rem;
            color: #60a5fa;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #94a3b8;
        }
        
        .search-section {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        #urlInput {
            flex: 1;
            padding: 15px;
            font-size: 16px;
            border: 2px solid #475569;
            border-radius: 10px;
            background: #1e293b;
            color: #e2e8f0;
        }
        
        #urlInput:focus {
            outline: none;
            border-color: #60a5fa;
        }
        
        .main-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .main-btn {
            padding: 15px 25px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            flex: 1;
            min-width: 200px;
            font-weight: bold;
        }
        
        .main-btn.auto {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .main-btn.direct {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }
        
        .main-btn.stop {
            background: linear-gradient(135deg, #ef4444, #b91c1c);
        }
        
        .main-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .main-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .quick-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .quick-btn {
            padding: 8px 15px;
            background: #475569;
            color: #e2e8f0;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .quick-btn:hover {
            background: #60a5fa;
            color: white;
        }
        
        .content-wrapper {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 900px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }
        }
        
        .manual-methods {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }
        
        .methods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .method-card {
            background: rgba(15, 23, 42, 0.8);
            border: 2px solid #475569;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .method-card:hover {
            border-color: #60a5fa;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(96, 165, 250, 0.2);
        }
        
        .method-card:active {
            transform: translateY(-2px);
        }
        
        .method-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .method-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #e2e8f0;
        }
        
        .method-desc {
            font-size: 0.85rem;
            color: #94a3b8;
            line-height: 1.4;
        }
        
        .scan-results {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-title {
            color: #60a5fa;
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        .stats {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .stat {
            background: rgba(15, 23, 42, 0.8);
            padding: 15px;
            border-radius: 10px;
            flex: 1;
            min-width: 120px;
            text-align: center;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #60a5fa;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #94a3b8;
        }
        
        .progress-container {
            margin: 20px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #475569;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #3b82f6);
            width: 0%;
            transition: width 0.3s;
        }
        
        .result-cards {
            margin-top: 20px;
        }
        
        .result-card {
            background: rgba(15, 23, 42, 0.8);
            border: 2px solid #475569;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        
        .result-card.working {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }
        
        .result-card.failed {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }
        
        .result-card.testing {
            border-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .result-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .use-btn {
            padding: 8px 15px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .use-btn:hover {
            background: #0da271;
        }
        
        .log-box {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding: 5px 0;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }
        
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #60a5fa; }
        .warning { color: #f59e0b; }
        
        .category-title {
            color: #94a3b8;
            font-size: 1.1rem;
            margin: 25px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
        }
        
        .category-title:first-child {
            margin-top: 0;
        }
        
        .direct-result {
            background: rgba(139, 92, 246, 0.2);
            border: 2px solid #8b5cf6;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîì Complete Portal</h1>
            <p class="subtitle">Auto Scan + Manual Buttons</p>
        </header>
        
        <div class="search-section">
            <div class="search-box">
                <input type="text" id="urlInput" placeholder="Enter website URL (e.g., youtube.com)" value="youtube.com">
                <button class="main-btn auto" id="autoBtn">ü§ñ AUTO SCAN</button>
            </div>
            
            <div class="main-buttons">
                <button class="main-btn direct" id="directBtn">üéØ DIRECT TEST</button>
                <button class="main-btn" id="openAllBtn">üöÄ OPEN ALL METHODS</button>
            </div>
            
            <div class="quick-links">
                <button class="quick-btn" data-url="youtube.com">YouTube</button>
                <button class="quick-btn" data-url="reddit.com">Reddit</button>
                <button class="quick-btn" data-url="twitter.com">Twitter</button>
                <button class="quick-btn" data-url="coolmathgames.com">CoolMath</button>
                <button class="quick-btn" data-url="discord.com">Discord</button>
                <button class="quick-btn" data-url="netflix.com">Netflix</button>
                <button class="quick-btn" data-url="instagram.com">Instagram</button>
                <button class="quick-btn" data-url="spotify.com">Spotify</button>
            </div>
        </div>
        
        <div class="content-wrapper">
            <!-- LEFT SIDE: MANUAL METHODS -->
            <div class="manual-methods">
                <h2 class="section-title">üõ†Ô∏è Manual Methods</h2>
                <p style="color:#94a3b8;margin-bottom:20px;">Click any method to open with it</p>
                
                <div class="category-title">üåê Proxy Methods</div>
                <div class="methods-grid">
                    <div class="method-card" data-method="translate">
                        <div class="method-icon">üåê</div>
                        <div class="method-name">Google Translate</div>
                        <div class="method-desc">Google's built-in proxy</div>
                    </div>
                    
                    <div class="method-card" data-method="archive">
                        <div class="method-icon">üìö</div>
                        <div class="method-name">Wayback Machine</div>
                        <div class="method-desc">Cached website versions</div>
                    </div>
                    
                    <div class="method-card" data-method="reader">
                        <div class="method-icon">üìñ</div>
                        <div class="method-name">Reader View</div>
                        <div class="method-desc">Clean reading mode</div>
                    </div>
                    
                    <div class="method-card" data-method="mobile">
                        <div class="method-icon">üì±</div>
                        <div class="method-name">Mobile View</div>
                        <div class="method-desc">Mobile version of site</div>
                    </div>
                </div>
                
                <div class="category-title">üõ°Ô∏è VPN Methods</div>
                <div class="methods-grid">
                    <div class="method-card" data-method="websocket">
                        <div class="method-icon">üîå</div>
                        <div class="method-name">WebSocket Proxy</div>
                        <div class="method-desc">WebSocket tunnel</div>
                    </div>
                    
                    <div class="method-card" data-method="public">
                        <div class="method-icon">üîÑ</div>
                        <div class="method-name">Public Proxies</div>
                        <div class="method-desc">Rotating proxy list</div>
                    </div>
                    
                    <div class="method-card" data-method="cors">
                        <div class="method-icon">‚ö°</div>
                        <div class="method-name">CORS Proxy</div>
                        <div class="method-desc">CORS bypass proxy</div>
                    </div>
                    
                    <div class="method-card" data-method="ssh">
                        <div class="method-icon">üîí</div>
                        <div class="method-name">SSH Tunnel</div>
                        <div class="method-desc">SSH port forwarding</div>
                    </div>
                </div>
                
                <div class="category-title">‚ö° Advanced Methods</div>
                <div class="methods-grid">
                    <div class="method-card" data-method="textise">
                        <div class="method-icon">üìÑ</div>
                        <div class="method-name">Textise Pro</div>
                        <div class="method-desc">Text-only render</div>
                    </div>
                    
                    <div class="method-card" data-method="pdf">
                        <div class="method-icon">üìë</div>
                        <div class="method-name">PDF View</div>
                        <div class="method-desc">Printable PDF version</div>
                    </div>
                    
                    <div class="method-card" data-method="dataurl">
                        <div class="method-icon">üîó</div>
                        <div class="method-name">Data URL</div>
                        <div class="method-desc">Local HTML redirect</div>
                    </div>
                    
                    <div class="method-card" data-method="amp">
                        <div class="method-icon">‚ö°</div>
                        <div class="method-name">AMP Cache</div>
                        <div class="method-desc">Google AMP version</div>
                    </div>
                </div>
            </div>
            
            <!-- RIGHT SIDE: AUTO SCAN RESULTS -->
            <div class="scan-results">
                <div class="results-header">
                    <h2 class="section-title">üìä Scan Results</h2>
                    <button class="main-btn stop" id="stopBtn" style="display:none;">‚èπÔ∏è STOP</button>
                </div>
                
                <div class="direct-result" id="directResult" style="display:none;">
                    <!-- Direct test result appears here -->
                </div>
                
                <div class="stats">
                    <div class="stat">
                        <div class="stat-value" id="totalMethods">12</div>
                        <div class="stat-label">Total Methods</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="testedMethods">0</div>
                        <div class="stat-label">Tested</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="workingMethods">0</div>
                        <div class="stat-label">Working</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="directStatus">‚ùì</div>
                        <div class="stat-label">Direct</div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div id="progressText" style="text-align:center;margin-top:5px;color:#94a3b8;">
                        Ready to scan...
                    </div>
                </div>
                
                <div class="result-cards" id="resultCards">
                    <!-- Scan result cards appear here -->
                </div>
                
                <div class="log-box" id="logBox">
                    <div class="log-entry info">System ready. Enter URL and click a method or AUTO SCAN.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============ COMPLETE METHOD LIBRARY ============
        const ALL_METHODS = {
            // Proxy Methods
            translate: {
                name: 'Google Translate',
                icon: 'üåê',
                category: 'proxy',
                execute: (url) => [
                    `https://translate.google.com/translate?hl=en&sl=auto&tl=en&u=${encodeURIComponent(url)}`,
                    `https://translate.googleusercontent.com/translate?hl=en&sl=auto&tl=en&u=${encodeURIComponent(url)}`
                ]
            },
            archive: {
                name: 'Wayback Machine',
                icon: 'üìö',
                category: 'proxy',
                execute: (url) => [
                    `https://web.archive.org/web/${url}`,
                    `https://web.archive.org/web/2024/${url}`,
                    `https://archive.is/${url}`
                ]
            },
            reader: {
                name: 'Reader View',
                icon: 'üìñ',
                category: 'proxy',
                execute: (url) => {
                    const clean = url.replace(/^https?:\/\//, '');
                    
                    // IMPROVED READER VIEW OPTIONS:
                    // 1. Enhanced iframe-based reader with better styling
                    const enhancedReader = `
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reader View: ${clean}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .reader-header {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .reader-header h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }
        
        .reader-header .url {
            font-family: monospace;
            font-size: 0.9rem;
            opacity: 0.9;
            word-break: break-all;
        }
        
        .reader-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 8px 16px;
            background: white;
            border: 2px solid #4f46e5;
            color: #4f46e5;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .control-btn:hover {
            background: #4f46e5;
            color: white;
        }
        
        .reader-content {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            min-height: 500px;
        }
        
        .loader {
            text-align: center;
            padding: 3rem;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e0e0e0;
            border-top-color: #4f46e5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .error-message {
            color: #dc2626;
            padding: 1rem;
            background: #fee2e2;
            border-radius: 5px;
            margin: 1rem 0;
        }
        
        .backup-link {
            display: inline-block;
            margin-top: 1rem;
            padding: 10px 20px;
            background: #4f46e5;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
        
        .backup-link:hover {
            background: #3730a3;
        }
    </style>
</head>
<body>
    <div class="reader-header">
        <h1>üìñ Reader View</h1>
        <p class="url">${url}</p>
    </div>
    
    <div class="reader-controls">
        <button class="control-btn" onclick="loadOriginal()">Original Site</button>
        <button class="control-btn" onclick="toggleDarkMode()">Dark Mode</button>
        <button class="control-btn" onclick="increaseFont()">A+</button>
        <button class="control-btn" onclick="decreaseFont()">A-</button>
        <button class="control-btn" onclick="printPage()">Print</button>
    </div>
    
    <div class="reader-content" id="contentFrame">
        <div class="loader">
            <div class="spinner"></div>
            <p>Loading reader view...</p>
            <p style="margin-top: 1rem; font-size: 0.9rem;">
                If this takes too long, try the <a href="${url}" class="backup-link">direct link</a>
            </p>
        </div>
    </div>

    <script>
        let fontSize = 16;
        let darkMode = false;
        
        function loadOriginal() {
            window.open('${url}', '_blank');
        }
        
        function toggleDarkMode() {
            darkMode = !darkMode;
            document.body.style.backgroundColor = darkMode ? '#1e293b' : '#f5f5f5';
            document.body.style.color = darkMode ? '#e2e8f0' : '#333';
            document.querySelector('.reader-content').style.backgroundColor = darkMode ? '#0f172a' : 'white';
            document.querySelector('.reader-content').style.color = darkMode ? '#cbd5e1' : '#333';
        }
        
        function increaseFont() {
            fontSize += 2;
            document.querySelector('.reader-content').style.fontSize = fontSize + 'px';
        }
        
        function decreaseFont() {
            fontSize = Math.max(12, fontSize - 2);
            document.querySelector('.reader-content').style.fontSize = fontSize + 'px';
        }
        
        function printPage() {
            window.print();
        }
        
        // Load content using multiple methods
        async function loadContent() {
            const contentDiv = document.getElementById('contentFrame');
            
            // Method 1: Try to fetch via text proxy
            try {
                const response = await fetch('https://api.allorigins.win/get?url=' + encodeURIComponent('${url}'));
                const data = await response.json();
                
                // Simple content extractor - remove scripts and styles
                const parser = new DOMParser();
                const doc = parser.parseFromString(data.contents, 'text/html');
                
                // Remove unwanted elements
                ['script', 'style', 'nav', 'header', 'footer', 'iframe', 'form', 'button'].forEach(tag => {
                    doc.querySelectorAll(tag).forEach(el => el.remove());
                });
                
                // Clean up images
                doc.querySelectorAll('img').forEach(img => {
                    img.style.maxWidth = '100%';
                    img.style.height = 'auto';
                });
                
                // Set clean content
                contentDiv.innerHTML = '<div style="padding: 20px;">' + doc.body.innerHTML + '</div>';
                return;
                
            } catch (e) {
                console.log('Text proxy failed:', e);
            }
            
            // Method 2: Use iframe fallback
            contentDiv.innerHTML = \`
                <div style="padding: 10px;">
                    <h3>Using iframe fallback...</h3>
                    <iframe 
                        src="https://r.jina.ai/http://${clean}" 
                        style="width:100%; height:600px; border:none; border-radius:10px;"
                        sandbox="allow-same-origin allow-scripts"
                        title="Reader view"
                    ></iframe>
                </div>
            \`;
        }
        
        // Try to load content
        loadContent().catch(e => {
            document.getElementById('contentFrame').innerHTML = \`
                <div class="error-message">
                    <h3>Failed to load reader view</h3>
                    <p>\${e.message}</p>
                    <p>Try one of these alternatives:</p>
                    <div style="margin-top: 10px;">
                        <a href="\${url}" class="backup-link">Original Site</a>
                        <a href="https://web.archive.org/web/\${url}" class="backup-link" style="margin-left: 10px;">Archive</a>
                        <a href="https://translate.google.com/translate?hl=en&sl=auto&tl=en&u=\${encodeURIComponent(url)}" 
                           class="backup-link" style="margin-left: 10px;">
                            Google Translate
                        </a>
                    </div>
                </div>
            \`;
        });
    </script>
</body>
</html>`;
                    
                    // 2. Alternative: Google AMP reader mode
                    const ampReader = `https://www.google.com/amp/s/${clean}`;
                    
                    // 3. Alternative: Simple iframe with reader styling
                    const simpleReader = `
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Reader: ${clean}</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Georgia, 'Times New Roman', serif;
            line-height: 1.8;
            max-width: 700px;
            margin: 0 auto;
            background: #f8f9fa;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        h1 { color: #2d3748; margin-bottom: 20px; }
        p { margin-bottom: 1.5rem; color: #4a5568; }
        .site-info {
            background: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 30px;
            font-family: monospace;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìñ Reader View</h1>
        <div class="site-info">Loading: ${url}</div>
        <iframe 
            src="https://r.jina.ai/http://${clean}"
            style="width:100%; height:80vh; border:none;"
            sandbox="allow-same-origin allow-scripts"
        ></iframe>
        <div style="margin-top:20px; text-align:center;">
            <a href="${url}" style="color:#4f46e5; text-decoration:none;">Open Original Site</a>
        </div>
    </div>
</body>
</html>`;
                    
                    // Return all reader view options
                    return [
                        'data:text/html;charset=utf-8,' + encodeURIComponent(enhancedReader),
                        ampReader,
                        'data:text/html;charset=utf-8,' + encodeURIComponent(simpleReader),
                        `https://r.jina.ai/http://${clean}`,
                        `https://r.jina.ai/https://${clean}`
                    ];
                }
            },
            mobile: {
                name: 'Mobile View',
                icon: 'üì±',
                category: 'proxy',
                execute: (url) => {
                    const clean = url.replace(/^https?:\/\//, '');
                    return [
                        `https://m.${clean}`,
                        `https://mobile.${clean}`,
                        `https://www.google.com/amp/s/${clean}`
                    ];
                }
            },
            
            // VPN Methods
            websocket: {
                name: 'WebSocket Proxy',
                icon: 'üîå',
                category: 'vpn',
                execute: (url) => [
                    `https://corsproxy.io/?${encodeURIComponent(url)}`,
                    `https://proxy.cors.sh/${url}`
                ]
            },
            public: {
                name: 'Public Proxies',
                icon: 'üîÑ',
                category: 'vpn',
                execute: (url) => {
                    const encoded = encodeURIComponent(url);
                    return [
                        `https://corsproxy.io/?${encoded}`,
                        `https://proxy.cors.sh/${url}`,
                        `https://api.allorigins.win/get?url=${encoded}`,
                        `https://cors-anywhere.herokuapp.com/${url}`
                    ];
                }
            },
            cors: {
                name: 'CORS Proxy',
                icon: '‚ö°',
                category: 'vpn',
                execute: (url) => [
                    `https://corsproxy.io/?${encodeURIComponent(url)}`,
                    `https://thingproxy.freeboard.io/fetch/${url}`
                ]
            },
            ssh: {
                name: 'SSH Tunnel',
                icon: 'üîí',
                category: 'vpn',
                execute: (url) => [
                    `https://yacdn.org/proxy/${url}`,
                    `https://api.codetabs.com/v1/proxy?quest=${url}`
                ]
            },
            
            // Advanced Methods
            textise: {
                name: 'Textise Pro',
                icon: 'üìÑ',
                category: 'advanced',
                execute: (url) => {
                    const clean = url.replace(/^https?:\/\//, '');
                    return [
                        `https://r.jina.ai/http://${clean}`,
                        `https://r.jina.ai/https://${clean}`
                    ];
                }
            },
            pdf: {
                name: 'PDF View',
                icon: 'üìë',
                category: 'advanced',
                execute: (url) => [
                    `https://www.printfriendly.com/print/?source=${encodeURIComponent(url)}`,
                    `https://pdfmyurl.com/saveaspdf?url=${encodeURIComponent(url)}`
                ]
            },
            dataurl: {
                name: 'Data URL',
                icon: 'üîó',
                category: 'advanced',
                execute: (url) => {
                    const html = `
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="0;url=${url}">
    <style>
        body { 
            margin: 0; padding: 40px; 
            background: linear-gradient(135deg, #0f172a, #1e293b);
            color: #60a5fa;
            font-family: Arial;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(96, 165, 250, 0.3);
            border-radius: 50%;
            border-top-color: #60a5fa;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div>
        <div class="spinner"></div>
        <h3>Loading ${new URL(url).hostname}</h3>
        <p><a href="${url}" style="color:#60a5fa;">Click here if not redirected</a></p>
    </div>
</body>
</html>`;
                    return ['data:text/html;charset=utf-8,' + encodeURIComponent(html)];
                }
            },
            amp: {
                name: 'AMP Cache',
                icon: '‚ö°',
                category: 'advanced',
                execute: (url) => {
                    const clean = url.replace(/^https?:\/\//, '');
                    return [
                        `https://www.google.com/amp/s/${clean}`,
                        `https://cdn.ampproject.org/c/${url}`
                    ];
                }
            }
        };

        // ============ STATE ============
        let scanActive = false;
        let scanResults = {};
        let directTestResult = null;
        let stats = {
            total: Object.keys(ALL_METHODS).length,
            tested: 0,
            working: 0
        };

        // ============ DOM ELEMENTS ============
        const elements = {
            urlInput: document.getElementById('urlInput'),
            autoBtn: document.getElementById('autoBtn'),
            directBtn: document.getElementById('directBtn'),
            openAllBtn: document.getElementById('openAllBtn'),
            stopBtn: document.getElementById('stopBtn'),
            directResult: document.getElementById('directResult'),
            resultCards: document.getElementById('resultCards'),
            logBox: document.getElementById('logBox'),
            progressFill: document.getElementById('progressFill'),
            progressText: document.getElementById('progressText')
        };

        // ============ UTILITIES ============
        function log(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            elements.logBox.prepend(entry);
            if (elements.logBox.children.length > 30) {
                elements.logBox.removeChild(elements.logBox.lastChild);
            }
        }

        function updateProgress(current, total) {
            const progress = (current / total) * 100;
            elements.progressFill.style.width = progress + '%';
            return progress;
        }

        function updateStats() {
            document.getElementById('totalMethods').textContent = stats.total;
            document.getElementById('testedMethods').textContent = stats.tested;
            document.getElementById('workingMethods').textContent = stats.working;
            
            const directEl = document.getElementById('directStatus');
            if (directTestResult === true) {
                directEl.textContent = '‚úÖ';
                directEl.style.color = '#10b981';
            } else if (directTestResult === false) {
                directEl.textContent = '‚ùå';
                directEl.style.color = '#ef4444';
            } else {
                directEl.textContent = '‚ùì';
                directEl.style.color = '#94a3b8';
            }
        }

        function formatUrl(input) {
            let url = input.trim();
            if (!url.includes('.')) return null;
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }
            try {
                new URL(url);
                return url;
            } catch {
                return null;
            }
        }

        // ============ DIRECT TEST ============
        async function testDirectAccess() {
            const input = elements.urlInput.value.trim();
            if (!input) {
                log('Please enter a URL', 'error');
                return;
            }
            
            const url = formatUrl(input);
            if (!url) {
                log('Invalid URL', 'error');
                return;
            }
            
            log('Testing direct access...', 'info');
            elements.directResult.style.display = 'block';
            elements.directResult.innerHTML = `
                <div style="display:flex;align-items:center;gap:15px;">
                    <div class="spinner" style="width:30px;height:30px;border:3px solid rgba(96,165,250,0.3);border-radius:50%;border-top-color:#60a5fa;animation:spin 1s linear infinite;"></div>
                    <div>
                        <h3 style="margin:0;color:#60a5fa;">Testing Direct Access...</h3>
                        <p style="margin:5px 0 0 0;color:#94a3b8;">Checking if site is blocked</p>
                    </div>
                </div>
            `;
            
            // Test direct access
            const canAccess = await testNetworkAccess(url);
            
            // Show result
            if (canAccess) {
                elements.directResult.innerHTML = `
                    <div style="display:flex;align-items:center;gap:15px;">
                        <span style="font-size:2rem">‚úÖ</span>
                        <div>
                            <h3 style="margin:0;color:#10b981;">DIRECT ACCESS WORKS!</h3>
                            <p style="margin:5px 0 0 0;color:#94a3b8;">Site is not blocked</p>
                        </div>
                    </div>
                    <button class="use-btn" style="margin-top:15px;background:#8b5cf6;" id="useDirectBtn">üöÄ OPEN DIRECTLY</button>
                `;
                
                document.getElementById('useDirectBtn').addEventListener('click', () => {
                    window.open(url, '_direct');
                });
                
                log('‚úÖ Direct access available', 'success');
                directTestResult = true;
                
            } else {
                elements.directResult.innerHTML = `
                    <div style="display:flex;align-items:center;gap:15px;">
                        <span style="font-size:2rem">‚ùå</span>
                        <div>
                            <h3 style="margin:0;color:#ef4444;">DIRECT ACCESS BLOCKED</h3>
                            <p style="margin:5px 0 0 0;color:#94a3b8;">Site is blocked. Try proxy methods.</p>
                        </div>
                    </div>
                `;
                
                log('‚ùå Direct access blocked', 'error');
                directTestResult = false;
            }
            
            updateStats();
            return canAccess;
        }

        async function testNetworkAccess(url) {
            return new Promise((resolve) => {
                let success = false;
                let tests = 0;
                const maxTests = 3;
                
                // Test 1: Fetch HEAD request
                fetch(url, { 
                    method: 'HEAD',
                    mode: 'no-cors',
                    cache: 'no-store'
                }).then(() => {
                    success = true;
                    resolve(true);
                }).catch(() => {
                    tests++;
                    if (tests >= maxTests && !success) resolve(false);
                });
                
                // Test 2: Image load
                const img = new Image();
                img.onload = () => {
                    success = true;
                    resolve(true);
                };
                img.onerror = () => {
                    tests++;
                    if (tests >= maxTests && !success) resolve(false);
                };
                img.src = url + '?test=' + Date.now();
                
                // Test 3: Timeout fallback
                setTimeout(() => {
                    if (!success) {
                        resolve(false);
                    }
                }, 3000);
            });
        }

        // ============ MANUAL METHOD BUTTONS ============
        function setupManualMethods() {
            document.querySelectorAll('.method-card').forEach(card => {
                card.addEventListener('click', () => {
                    const methodId = card.dataset.method;
                    const method = ALL_METHODS[methodId];
                    if (!method) return;
                    
                    const input = elements.urlInput.value.trim();
                    if (!input) {
                        log('Enter URL first', 'error');
                        return;
                    }
                    
                    const url = formatUrl(input);
                    if (!url) {
                        log('Invalid URL', 'error');
                        return;
                    }
                    
                    log(`Using ${method.name}...`, 'info');
                    
                    // Add visual feedback
                    card.style.transform = 'scale(0.95)';
                    card.style.borderColor = '#f59e0b';
                    setTimeout(() => {
                        card.style.transform = '';
                        card.style.borderColor = '';
                    }, 300);
                    
                    // Open method
                    const urls = method.execute(url);
                    urls.forEach((proxyUrl, index) => {
                        setTimeout(() => {
                            try {
                                window.open(proxyUrl, `manual_${methodId}_${index}`);
                                log(`Opened ${method.name} (variant ${index + 1})`, 'success');
                            } catch(e) {
                                log(`${method.name} failed: ${e.message}`, 'error');
                            }
                        }, index * 500);
                    });
                });
            });
        }

        // ============ OPEN ALL METHODS ============
        function openAllMethods() {
            const input = elements.urlInput.value.trim();
            if (!input) {
                log('Enter URL first', 'error');
                return;
            }
            
            const url = formatUrl(input);
            if (!url) {
                log('Invalid URL', 'error');
                return;
            }
            
            log('Opening ALL methods...', 'info');
            elements.openAllBtn.disabled = true;
            
            let count = 0;
            Object.keys(ALL_METHODS).forEach((methodId, index) => {
                const method = ALL_METHODS[methodId];
                const urls = method.execute(url);
                
                setTimeout(() => {
                    if (urls[0]) {
                        try {
                            window.open(urls[0], `all_${methodId}`);
                            count++;
                            log(`Opened ${method.name}`, 'success');
                        } catch(e) {
                            log(`${method.name} failed`, 'error');
                        }
                    }
                    
                    // Update progress
                    const progress = ((index + 1) / Object.keys(ALL_METHODS).length) * 100;
                    elements.progressFill.style.width = progress + '%';
                    elements.progressText.textContent = `${Math.round(progress)}% - Opening methods...`;
                    
                    // Re-enable button when done
                    if (index === Object.keys(ALL_METHODS).length - 1) {
                        setTimeout(() => {
                            elements.openAllBtn.disabled = false;
                            log(`Opened ${count} methods`, 'success');
                            elements.progressText.textContent = 'Complete';
                        }, 1000);
                    }
                }, index * 1000);
            });
        }

        // ============ AUTO SCAN ============
        async function startAutoScan() {
            if (scanActive) {
                stopScan();
                return;
            }
            
            const input = elements.urlInput.value.trim();
            if (!input) {
                log('Please enter a URL', 'error');
                return;
            }
            
            const url = formatUrl(input);
            if (!url) {
                log('Invalid URL', 'error');
                return;
            }
            
            // Reset state
            scanActive = true;
            scanResults = {};
            stats.tested = 0;
            stats.working = 0;
            elements.resultCards.innerHTML = '';
            elements.stopBtn.style.display = 'block';
            
            // Update UI
            elements.autoBtn.disabled = true;
            elements.autoBtn.textContent = '‚è≥ SCANNING...';
            elements.autoBtn.className = 'main-btn stop';
            
            log(`üöÄ Starting AUTO SCAN for: ${url}`, 'info');
            
            // Test direct access first
            const directWorks = await testDirectAccess();
            
            if (directWorks) {
                // If direct works, ask if they want to continue
                if (!confirm('Direct access works! Continue testing proxy methods?')) {
                    stopScan();
                    return;
                }
            }
            
            // Get all method IDs
            const methodIds = Object.keys(ALL_METHODS);
            const totalMethods = methodIds.length;
            
            for (let i = 0; i < totalMethods; i++) {
                if (!scanActive) break;
                
                const methodId = methodIds[i];
                const method = ALL_METHODS[methodId];
                
                // Update progress
                const progress = updateProgress(i + 1, totalMethods);
                elements.progressText.textContent = `${Math.round(progress)}% - Testing ${method.name}...`;
                
                // Create testing card
                addResultCard(method, 'testing', null);
                
                // Test the method
                try {
                    const result = await testMethod(method, url);
                    scanResults[methodId] = result;
                    stats.tested++;
                    
                    if (result.working) {
                        stats.working++;
                        updateResultCard(methodId, 'working', result.url);
                        log(`‚úÖ ${method.name} works`, 'success');
                    } else {
                        updateResultCard(methodId, 'failed', null);
                        log(`‚ùå ${method.name} failed`, 'error');
                    }
                    
                } catch (error) {
                    log(`Error testing ${method.name}: ${error.message}`, 'error');
                    updateResultCard(methodId, 'failed', null);
                    stats.tested++;
                }
                
                updateStats();
            }
            
            // Complete
            if (scanActive) {
                scanComplete();
            }
        }

        async function testMethod(method, url) {
            return new Promise((resolve) => {
                const urls = method.execute(url);
                let tested = 0;
                let success = false;
                
                urls.forEach((testUrl, index) => {
                    setTimeout(() => {
                        if (success) return;
                        
                        tested++;
                        
                        try {
                            const win = window.open(testUrl, `test_${method.name}_${index}`, 'width=500,height=400,left=100,top=100');
                            
                            setTimeout(() => {
                                if (win && !win.closed) {
                                    success = true;
                                    win.close();
                                    resolve({
                                        method: method,
                                        working: true,
                                        url: testUrl
                                    });
                                } else if (tested === urls.length && !success) {
                                    resolve({
                                        method: method,
                                        working: false,
                                        url: null
                                    });
                                }
                            }, 3000);
                            
                        } catch(e) {
                            if (tested === urls.length && !success) {
                                resolve({
                                    method: method,
                                    working: false,
                                    url: null
                                });
                            }
                        }
                    }, index * 4000);
                });
            });
        }

        function addResultCard(method, status, url) {
            const card = document.createElement('div');
            card.className = `result-card ${status}`;
            card.id = `card-${method.name.replace(/\s+/g, '-').toLowerCase()}`;
            
            const statusText = status === 'testing' ? 'TESTING...' : 
                             status === 'working' ? 'WORKS' : 'FAILED';
            const statusIcon = status === 'testing' ? '‚è≥' :
                             status === 'working' ? '‚úÖ' : '‚ùå';
            
            card.innerHTML = `
                <div class="result-info">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span style="font-size:1.2rem">${method.icon}</span>
                        <div>
                            <div style="font-weight:bold;">${method.name}</div>
                            <div style="font-size:0.9rem;color:#94a3b8;">${statusText}</div>
                        </div>
                    </div>
                    ${url ? `<button class="use-btn" data-url="${url}">USE</button>` : ''}
                </div>
            `;
            
            elements.resultCards.appendChild(card);
            
            // Add click handler for use button
            if (url) {
                setTimeout(() => {
                    const useBtn = card.querySelector('.use-btn');
                    if (useBtn) {
                        useBtn.addEventListener('click', () => {
                            window.open(url, `use_${method.name}`);
                        });
                    }
                }, 100);
            }
            
            return card;
        }

        function updateResultCard(methodId, status, url) {
            const method = ALL_METHODS[methodId];
            const cardId = `card-${method.name.replace(/\s+/g, '-').toLowerCase()}`;
            const card = document.getElementById(cardId);
            
            if (!card) return;
            
            card.className = `result-card ${status}`;
            
            const statusText = status === 'working' ? 'WORKS' : 'FAILED';
            const statusIcon = status === 'working' ? '‚úÖ' : '‚ùå';
            
            card.innerHTML = `
                <div class="result-info">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <span style="font-size:1.2rem">${method.icon}</span>
                        <div>
                            <div style="font-weight:bold;">${method.name}</div>
                            <div style="font-size:0.9rem;color:#94a3b8;">${statusText}</div>
                        </div>
                    </div>
                    ${url ? `<button class="use-btn" data-url="${url}">USE</button>` : ''}
                </div>
            `;
            
            if (url) {
                setTimeout(() => {
                    const useBtn = card.querySelector('.use-btn');
                    if (useBtn) {
                        useBtn.addEventListener('click', () => {
                            window.open(url, `use_${method.name}`);
                        });
                    }
                }, 100);
            }
        }

        function scanComplete() {
            scanActive = false;
            
            const worked = stats.working;
            const direct = directTestResult;
            
            elements.autoBtn.disabled = false;
            elements.autoBtn.textContent = 'ü§ñ AUTO SCAN';
            elements.autoBtn.className = 'main-btn auto';
            elements.stopBtn.style.display = 'none';
            
            if (direct === true) {
                elements.progressText.textContent = '‚úÖ Direct access works!';
                log('Scan complete: Direct access available', 'success');
            } else if (worked > 0) {
                elements.progressText.textContent = `‚úÖ ${worked} methods work`;
                log(`Scan complete: ${worked} methods work`, 'success');
            } else {
                elements.progressText.textContent = '‚ùå No methods work';
                log('Scan complete: No methods work', 'error');
            }
        }

        function stopScan() {
            scanActive = false;
            elements.autoBtn.disabled = false;
            elements.autoBtn.textContent = 'ü§ñ AUTO SCAN';
            elements.autoBtn.className = 'main-btn auto';
            elements.stopBtn.style.display = 'none';
            elements.progressText.textContent = 'Scan stopped';
            log('Scan stopped by user', 'warning');
        }

        // ============ INITIALIZATION ============
        function init() {
            // Setup manual method buttons
            setupManualMethods();
            
            // Event listeners
            elements.autoBtn.addEventListener('click', startAutoScan);
            elements.directBtn.addEventListener('click', testDirectAccess);
            elements.openAllBtn.addEventListener('click', openAllMethods);
            elements.stopBtn.addEventListener('click', stopScan);
            
            // Quick links
            document.querySelectorAll('.quick-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    elements.urlInput.value = btn.dataset.url;
                    log(`Loaded: ${btn.dataset.url}`, 'info');
                });
            });
            
            // URL input
            elements.urlInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    startAutoScan();
                }
            });
            
            // Escape to stop
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && scanActive) {
                    stopScan();
                }
            });
            
            // Initial stats
            updateStats();
            
            // Welcome
            log('Complete Portal loaded', 'info');
            log('Click manual buttons or use AUTO SCAN', 'info');
            
            // Auto-focus
            elements.urlInput.focus();
            elements.urlInput.select();
        }

        // Start
        init();
        
    </script>
</body>
</html>
